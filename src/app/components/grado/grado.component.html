<section class="card">
  <app-loading-bar [width]="widthLoadingBar"></app-loading-bar>

  <h2 class="title">
    <span translate>teaching.grade</span>
  </h2>

  <div class="links">
    <div class="subtitle" translate>teaching.links_of_interest</div>
    <ul>
      <li *ngFor="let link of links">
        <a target="_blank" href="{{link.url}}">
          <span translate>
            teaching.{{link.text}}
          </span>
        </a>
      </li>
    </ul>
  </div>

  <div class="table" *ngIf="loading">
    <div class="subtitle" translate>teaching.subject_trable</div>
    <div class="table-header">
      <div class="table-header__option" *ngFor="let quarter of gradeData" [ngClass]="{'selected': quarter.quarter == currentQuarter}"
        (click)="currentQuarter = quarter.quarter">
        {{quarter.quarter}} ยบ<span translate>teaching.quarter</span>
      </div>
    </div>
    <div *ngFor="let quarter of gradeData">
      <div class="table-content" *ngIf="currentQuarter === quarter.quarter">
        <div class="table-content__type" *ngFor="let type of quarter.types">
          <div>
            <span class="course">{{type.course}}ยบ <span translate>teaching.course</span></span>
            <span *ngIf="small()"><br></span>
            <span *ngIf="!small()"> - </span>
            <span translate>teaching.{{type.type}}</span>
            <div class="table-content__subjects">
              <div class="table-content__subject" (mouseleave)="leaveSubject($event)" (mouseenter)="overSubject($event)"
                (click)="toogleSubject($event)" *ngFor="let subject of type.subjects">
                <div class="table-content__subject-info">
                  <i class="material-icons">keyboard_arrow_right</i>
                  <div class="table-content__subject-code">
                    {{subject.code}}
                  </div>
                  <div class="table-content__subject-name" translate>
                    teaching.{{subject.name}}
                  </div>
                </div>
                <div class="table-content__subjects-groups">
                  <div *ngFor="let group of subject.groups" [ngClass]="{'show-group-code': group.code !== '','not-show-group-code': group.code === ''}"
                    (click)="selectSubject(quarter.quarter,type.type, subject.name, group.name, group.code )">
                    <span class="table-content__subject-code" *ngIf="group.code !== '' && subject.name !== 'tfg'">
                      {{group.code}}
                    </span>
                    <span *ngIf="['troncal', 'intensificacion'].includes(type.type) && subject.name !== 'tfg'">
                      <span translate>
                        teaching.group
                      </span>
                      <span>
                        {{group.name | uppercase}}
                      </span>
                    </span>
                    <span *ngIf="!['troncal', 'intensificacion'].includes(type.type) && subject.name !== 'tfg'"
                      translate>
                      teaching.{{group.name}}
                    </span>
                  </div>
                  <div *ngFor="let item of subject.links" class="links">
                    <a target="_blank" href="{{item.url}}">{{item.text}}</a>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
<app-subject [gradeData]="gradeData" *ngIf="showSubject()"></app-subject>
